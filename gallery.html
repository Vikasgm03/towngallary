<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vihara Gallery</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  /* --- VARIABLES --- */
  :root { --primary: #ff8c00; --dark: #333; --light: #f8f9fa; }
  * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
  body { background: var(--light); color: var(--dark); }

  /* --- HEADER --- */
  .gallery-header { 
    background: white; 
    padding: 1.5rem 5%; 
    text-align: center; 
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    position: sticky; top: 0; z-index: 100;
  }
  .brand { font-size: 1.5rem; font-weight: 700; color: var(--primary); text-decoration: none; display: block; margin-bottom: 5px; }
  .gallery-header h1 { font-size: 1.8rem; margin-bottom: 5px; }
  .gallery-header p { color: #666; font-size: 0.9rem; margin-bottom: 10px;}
  
  .home-btn { 
    display: inline-flex; align-items: center; gap: 8px;
    text-decoration: none; color: #555; font-size: 0.85rem; font-weight: 500;
    border: 1px solid #ddd; padding: 6px 16px; border-radius: 20px; transition:0.3s;
  }
  .home-btn:hover { background: var(--primary); color: white; border-color: var(--primary); }

  /* --- FILTER BAR --- */
  .filter-container { 
    padding: 20px 10px; 
    text-align: center; 
    overflow-x: auto; 
    white-space: nowrap; 
    -webkit-overflow-scrolling: touch; /* Smooth scroll on mobile */
  }
  
  /* Hide Scrollbar */
  .filter-container::-webkit-scrollbar { display: none; }
  
  .filter-btn {
    border: none; background: white; padding: 8px 20px; border-radius: 50px; cursor: pointer;
    font-weight: 600; color: #666; transition: 0.3s; border: 1px solid #eee; margin: 0 5px;
    font-size: 0.9rem;
  }
  .filter-btn:hover, .filter-btn.active { 
    background: var(--primary); color: white; border-color: var(--primary); 
    box-shadow: 0 4px 10px rgba(255, 140, 0, 0.3); transform: translateY(-2px);
  }

  /* --- MASONRY GRID --- */
  .gallery-grid {
    column-count: 3; 
    column-gap: 15px;
    padding: 15px;
    max-width: 1200px;
    margin: 0 auto;
  }
  
  @media (max-width: 900px) { .gallery-grid { column-count: 2; } }
  @media (max-width: 600px) { .gallery-grid { column-count: 2; column-gap: 10px; padding: 10px; } }

  /* --- GALLERY ITEM --- */
  .gallery-item {
    break-inside: avoid; 
    margin-bottom: 15px;
    position: relative;
    border-radius: 12px;
    overflow: hidden;
    cursor: zoom-in;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    
    /* SHIMMER LOADING EFFECT */
    background: #f6f7f8;
    background-image: linear-gradient(to right, #f6f7f8 0%, #edeef1 20%, #f6f7f8 40%, #f6f7f8 100%);
    background-repeat: no-repeat;
    background-size: 800px 100%; 
    animation: shimmer 1.5s infinite linear;
    min-height: 150px; /* Placeholder height */
  }
  
  @keyframes shimmer {
    0% { background-position: -468px 0; }
    100% { background-position: 468px 0; }
  }
  
  /* Image Styles */
  .gallery-img { 
    width: 100%; height: auto; display: block; 
    transition: transform 0.4s ease;
    opacity: 0; /* Hidden until loaded */
    animation: fadeIn 0.5s ease forwards;
  }

  @keyframes fadeIn { to { opacity: 1; } }

  .gallery-item:hover .gallery-img { transform: scale(1.05); }
  
  /* Caption Overlay */
  .caption {
    position: absolute; bottom: 0; left: 0; width: 100%;
    background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
    color: white; padding: 40px 15px 15px;
    opacity: 0; transition: 0.3s;
    font-size: 0.95rem; font-weight: 500;
    transform: translateY(10px);
  }
  
  .gallery-item:hover .caption { opacity: 1; transform: translateY(0); }

  /* --- LIGHTBOX --- */
  .lightbox {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.95); z-index: 2000;
    display: none; justify-content: center; align-items: center;
    flex-direction: column;
    backdrop-filter: blur(5px);
  }
  
  .lightbox img { 
    max-width: 90%; max-height: 80vh; 
    border-radius: 4px; 
    box-shadow: 0 0 30px rgba(0,0,0,0.5); 
    animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

  .close-lightbox { 
    position: absolute; top: 25px; right: 25px; 
    color: white; font-size: 2rem; cursor: pointer; 
    background: rgba(255,255,255,0.1); width: 45px; height: 45px; 
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    transition: 0.3s;
  }
  .close-lightbox:hover { background: rgba(255,255,255,0.3); transform: rotate(90deg); }

  .lightbox-caption { color: #ddd; margin-top: 15px; font-size: 1.1rem; text-align: center; font-weight: 300; }
</style>
</head>
<body>

  <div class="gallery-header">
    <a href="index.html" class="brand"><i class="fas fa-compass"></i> Vihara</a>
    <h1>Town Gallery</h1>
    <a href="more_categories.html" class="home-btn"><i class="fas fa-arrow-left"></i> Back to Categories</a>
  </div>

  <div class="filter-container">
    <button class="filter-btn active" onclick="filterGallery('all')">All Photos</button>
    <button class="filter-btn" onclick="filterGallery('nature')">Nature</button>
    <button class="filter-btn" onclick="filterGallery('temple')">Divine</button>
    <button class="filter-btn" onclick="filterGallery('food')">Food</button>
    <button class="filter-btn" onclick="filterGallery('stay')">Stays</button>
    <button class="filter-btn" onclick="filterGallery('shop')">Shops</button>
  </div>

  <div class="gallery-grid" id="galleryGrid">
    </div>

  <div class="lightbox" id="lightbox">
    <div class="close-lightbox" onclick="closeLightbox()">&times;</div>
    <img id="lightbox-img" src="">
    <p class="lightbox-caption" id="lightbox-caption"></p>
  </div>

  <script>
    // --- MASTER IMAGE DATA ---
    // Make sure these files exist in your folders!
    const images = [
      // NATURE
      { src: 'images/nature/hill.jpg', cat: 'nature', desc: 'Vindhyagiri Sunrise' },
      { src: 'images/nature/lake.jpg', cat: 'nature', desc: 'Janivara Lake View' },
      { src: 'images/nature/park.jpg', cat: 'nature', desc: 'Chandragiri Greenery' },
      
      // TEMPLES
      { src: 'images/temples/basadi.jpg', cat: 'temple', desc: 'Ancient Basadi' },
      { src: 'images/temples/temple.jpg', cat: 'temple', desc: 'Hoysala Architecture' },
      { src: 'images/temples/gopuram.jpg', cat: 'temple', desc: 'Brahmadeva Pillar' },

      // FOOD
      { src: 'images/food/dosa.jpg', cat: 'food', desc: 'Crispy Masala Dosa' },
      { src: 'images/food/thali.jpg', cat: 'food', desc: 'South Indian Thali' },
      { src: 'images/bakeries/cake.jpg', cat: 'food', desc: 'Creamy Pastries' },
      { src: 'images/bakeries/bread.jpg', cat: 'food', desc: 'Fresh Bread' },

      // STAYS & BARS
      { src: 'images/stays/hotel.jpg', cat: 'stay', desc: 'Hotel Mayura View' },
      { src: 'images/stays/lodge.jpg', cat: 'stay', desc: 'Budget Lodge' },
      { src: 'images/stays/room.jpg', cat: 'stay', desc: 'Guest House Room' },
      { src: 'images/bar/rooftop.jpg', cat: 'stay', desc: 'Skydeck Lounge' },

      // SHOPS / SERVICES / TRAVELS
      { src: 'images/retail/saree.jpg', cat: 'shop', desc: 'Silk Sarees' },
      { src: 'images/services/carpenter.jpg', cat: 'shop', desc: 'Local Crafts' },
      { src: 'images/travels/taxi.jpg', cat: 'shop', desc: 'Travel Services' }
    ];

    const grid = document.getElementById('galleryGrid');

    // 1. LOAD GALLERY
    function loadGallery(filter) {
      grid.innerHTML = ''; // Clear current grid

      let found = false;

      images.forEach(img => {
        if (filter === 'all' || img.cat === filter) {
          found = true;
          
          // Create Gallery Item
          const item = document.createElement('div');
          item.className = `gallery-item ${img.cat}`;
          item.innerHTML = `
            <img src="${img.src}" class="gallery-img" loading="lazy" 
                 onload="this.parentElement.style.animation='none'; this.style.opacity='1'" 
                 onerror="this.style.display='none'">
            <div class="caption">${img.desc}</div>
          `;
          
          // Add Click Event
          item.onclick = () => openLightbox(img.src, img.desc);
          
          grid.appendChild(item);
        }
      });

      // Show message if category is empty
      if (!found) {
        grid.innerHTML = '<p style="text-align:center; width:100%; padding:20px; color:#999;">No images available in this category yet.</p>';
      }
    }

    // 2. FILTER FUNCTION
    function filterGallery(category) {
      document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      loadGallery(category);
    }

    // 3. LIGHTBOX LOGIC
    const lightbox = document.getElementById('lightbox');
    const lbImg = document.getElementById('lightbox-img');
    const lbCap = document.getElementById('lightbox-caption');

    function openLightbox(src, desc) {
      lightbox.style.display = 'flex';
      lbImg.src = src;
      lbCap.innerText = desc;
    }

    function closeLightbox() {
      lightbox.style.display = 'none';
    }
    
    // Close on Background Click
    lightbox.onclick = (e) => {
      if(e.target === lightbox) closeLightbox();
    }

    // Initialize
    loadGallery('all');

  </script>

</body>
</html>
