<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vihara Gallery</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  :root { --primary: #ff8c00; --dark: #333; --light: #f8f9fa; }
  * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
  body { background: var(--light); color: var(--dark); }

  /* HEADER */
  .gallery-header { 
    background: white; 
    padding: 2rem 5%; 
    text-align: center; 
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    position: sticky; top: 0; z-index: 100;
  }
  .brand { font-size: 1.5rem; font-weight: 700; color: var(--primary); text-decoration: none; display: block; margin-bottom: 5px; }
  .gallery-header h1 { font-size: 2rem; margin-bottom: 5px; }
  .gallery-header p { color: #666; font-size: 0.9rem; }
  .home-btn { display: inline-block; margin-top: 10px; text-decoration: none; color: #555; font-size: 0.85rem; border: 1px solid #ddd; padding: 5px 15px; border-radius: 20px; transition:0.3s;}
  .home-btn:hover { background: var(--primary); color: white; border-color: var(--primary); }

  /* FILTER BAR */
  .filter-container { padding: 20px 10px; text-align: center; overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; }
  
  .filter-btn {
    border: none; background: white; padding: 8px 18px; border-radius: 50px; cursor: pointer;
    font-weight: 600; color: #666; transition: 0.3s; border: 1px solid #eee; margin: 0 4px;
    font-size: 0.9rem;
  }
  .filter-btn:hover, .filter-btn.active { 
    background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 4px 10px rgba(255, 140, 0, 0.3);
  }

  /* MASONRY GRID */
  .gallery-grid {
    column-count: 3; 
    column-gap: 15px;
    padding: 15px;
    max-width: 1200px;
    margin: 0 auto;
  }
  
  /* RESPONSIVE COLUMNS */
  @media (max-width: 900px) { .gallery-grid { column-count: 2; } }
  @media (max-width: 600px) { .gallery-grid { column-count: 2; column-gap: 10px; padding: 10px; } }

  .gallery-item {
    break-inside: avoid; 
    margin-bottom: 15px;
    position: relative;
    border-radius: 12px;
    overflow: hidden;
    cursor: zoom-in;
    transition: transform 0.3s;
    background: #fff;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  }
  
  /* Image Styling */
  .gallery-img { width: 100%; height: auto; display: block; }
  
  /* Hover Caption */
  .caption {
    position: absolute; bottom: 0; left: 0; width: 100%;
    background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
    color: white; padding: 30px 10px 10px;
    opacity: 0; transition: 0.3s;
    font-size: 0.9rem; font-weight: 500;
  }
  .gallery-item:hover .caption { opacity: 1; }

  /* LIGHTBOX */
  .lightbox {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.95); z-index: 1000;
    display: none; justify-content: center; align-items: center;
    flex-direction: column;
    animation: fadeIn 0.3s;
  }
  .lightbox img { max-width: 95%; max-height: 80vh; border-radius: 5px; box-shadow: 0 0 30px rgba(0,0,0,0.5); }
  .close-lightbox { position: absolute; top: 20px; right: 20px; color: white; font-size: 2.5rem; cursor: pointer; background: rgba(255,255,255,0.1); width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center;}
  .lightbox-caption { color: #ccc; margin-top: 20px; font-size: 1.1rem; text-align: center; }

  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  .hidden { display: none; }
</style>
</head>
<body>

  <div class="gallery-header">
    <a href="index.html" class="brand">Vihara</a>
    <h1>Town Gallery</h1>
    <a href="more_categories.html" class="home-btn"><i class="fas fa-th"></i> Categories</a>
  </div>

  <div class="filter-container">
    <button class="filter-btn active" onclick="filterGallery('all')">All</button>
    <button class="filter-btn" onclick="filterGallery('nature')">Nature</button>
    <button class="filter-btn" onclick="filterGallery('temple')">Divine</button>
    <button class="filter-btn" onclick="filterGallery('food')">Taste</button>
    <button class="filter-btn" onclick="filterGallery('stay')">Stays</button>
    <button class="filter-btn" onclick="filterGallery('shop')">Shops</button>
  </div>

  <div class="gallery-grid" id="galleryGrid">
    </div>

  <div class="lightbox" id="lightbox">
    <span class="close-lightbox" onclick="closeLightbox()">&times;</span>
    <img id="lightbox-img" src="">
    <p class="lightbox-caption" id="lightbox-caption"></p>
  </div>

  <script>
    // --- MASTER IMAGE LIST ---
    // This connects to the images you already used in your categories!
    const images = [
      // NATURE
      { src: 'images/nature/hill.jpg', cat: 'nature', desc: 'Vindhyagiri Sunrise' },
      { src: 'images/nature/lake.jpg', cat: 'nature', desc: 'Janivara Lake View' },
      { src: 'images/nature/park.jpg', cat: 'nature', desc: 'Chandragiri Greenery' },
      
      // TEMPLES
      { src: 'images/temples/basadi.jpg', cat: 'temple', desc: 'Ancient Basadi Carvings' },
      { src: 'images/temples/temple.jpg', cat: 'temple', desc: 'Hoysala Architecture' },
      { src: 'images/temples/gopuram.jpg', cat: 'temple', desc: 'Temple Entrance' },

      // FOOD
      { src: 'images/food/dosa.jpg', cat: 'food', desc: 'Crispy Masala Dosa' },
      { src: 'images/food/thali.jpg', cat: 'food', desc: 'South Indian Thali' },
      { src: 'images/bakeries/cake.jpg', cat: 'food', desc: 'Fresh Bakery Treats' },

      // STAYS
      { src: 'images/stays/hotel.jpg', cat: 'stay', desc: 'Luxury Stay View' },
      { src: 'images/stays/lodge.jpg', cat: 'stay', desc: 'Comfortable Lodging' },

      // SHOPS / RETAIL
      { src: 'images/textiles/saree.jpg', cat: 'shop', desc: 'Silk Sarees' }, 
      { src: 'images/handicrafts/idol.jpg', cat: 'shop', desc: 'Stone Carvings' },
      { src: 'images/automobiles/mechanic1.jpg', cat: 'shop', desc: 'Auto Services' }
    ];

    const grid = document.getElementById('galleryGrid');

    // 1. LOAD IMAGES
    function loadGallery(filter) {
      grid.innerHTML = ''; // Clear grid

      images.forEach(img => {
        // Check filter
        if (filter === 'all' || img.cat === filter) {
          
          // Create Element
          const item = document.createElement('div');
          item.className = `gallery-item ${img.cat}`;
          item.innerHTML = `
            <img src="${img.src}" class="gallery-img" loading="lazy" 
                 onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
            <div class="caption">${img.desc}</div>
          `;
          
          // Add Click Event for Lightbox
          item.onclick = () => openLightbox(img.src, img.desc);
          
          grid.appendChild(item);
        }
      });
    }

    // 2. FILTER FUNCTION
    function filterGallery(category) {
      // Highlight Button
      document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      
      // Reload Grid
      loadGallery(category);
    }

    // 3. LIGHTBOX FUNCTIONS
    const lightbox = document.getElementById('lightbox');
    const lbImg = document.getElementById('lightbox-img');
    const lbCap = document.getElementById('lightbox-caption');

    function openLightbox(src, desc) {
      lightbox.style.display = 'flex';
      lbImg.src = src;
      lbCap.innerText = desc;
    }

    function closeLightbox() {
      lightbox.style.display = 'none';
    }
    
    // Close when clicking background
    lightbox.onclick = (e) => {
      if(e.target === lightbox) closeLightbox();
    }

    // INITIAL LOAD
    loadGallery('all');

  </script>

</body>
</html>
